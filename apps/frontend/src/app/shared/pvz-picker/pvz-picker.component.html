@if(open){
  <div class="fixed inset-0 bg-black/40 flex items-center justify-center p-4">
    <div class="w-full max-w-2xl bg-white rounded-2xl p-4 space-y-3">
      <div class="flex items-center justify-between">
        <div class="text-lg font-semibold">Выбор ПВЗ</div>
        <button class="px-2 py-1 rounded bg-black/5" (click)="close.emit()">✕</button>
      </div>

      <div class="flex gap-2">
        <input class="flex-1 border rounded-lg px-3 py-2" placeholder="Город (например, Москва)"
               [(ngModel)]="city" name="city"/>
        <button class="px-3 py-2 rounded-lg bg-black text-white" (click)="load()">Найти</button>
      </div>

      @if(loading){
        <div class="opacity-70">Загрузка…</div>
      } @else if(error) {
        <div class="text-red-600">{{ error }}</div>
      } @else {
        <div class="max-h-[50vh] overflow-auto divide-y border rounded-xl">
          @for(p of points; track p.code){
            <button class="w-full text-left p-3 hover:bg-black/5" (click)="pick(p)">
              <div class="font-medium">{{ p.name }}</div>
              <div class="text-sm opacity-70">{{ p.city }} — {{ p.address }}</div>
              <div class="text-xs opacity-60">Код: {{ p.code }}</div>
            </button>
          }
        </div>
      }

    </div>
  </div>
}
