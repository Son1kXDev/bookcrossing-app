@if(open){
  <div class="fixed inset-0 bg-black/40 flex items-center justify-center p-4">
    <div class="w-full max-w-2xl card overflow-hidden">
      <div class="flex items-center justify-between px-4 py-3 border-b border-slate-200 bg-white">
        <div>
          <div class="text-lg font-semibold tracking-tight">Выбор ПВЗ</div>
          <div class="text-sm text-slate-600">Введите город и выберите пункт выдачи</div>
        </div>
        <button class="btn btn-ghost" (click)="close.emit()">✕</button>
      </div>

      <div class="p-4 space-y-3">
        <div class="flex gap-2">
          <input class="input flex-1" placeholder="Город (например, Москва)" [(ngModel)]="city" name="city"/>
          <button class="btn btn-primary" (click)="load()">Найти</button>
        </div>

        @if(loading){
          <div class="muted">Загрузка…</div>
        } @else if(error) {
          <div class="badge badge-red">{{ error }}</div>
        } @else {
          <div class="max-h-[50vh] overflow-auto divide-y border border-slate-200 rounded-2xl">
            @for(p of points; track p.code){
              <button class="w-full text-left p-3 hover:bg-slate-50" (click)="pick(p)">
                <div class="font-medium">{{ p.name }}</div>
                <div class="text-sm text-slate-600">{{ p.city }} — {{ p.address }}</div>
                <div class="text-xs text-slate-500">Код: {{ p.code }}</div>
              </button>
            }
          </div>
        }
      </div>
    </div>
  </div>
}
