<div class="max-w-xl mx-auto p-4 space-y-4">
  <h1 class="text-xl font-semibold">Добавить книгу</h1>

  <div class="rounded-xl border p-4 space-y-3">
    <div class="font-medium">Обложка</div>

    @if(coverFile){
      <img [src]="coverLocalUrl" alt="Обложка" class="w-full max-h-80 object-cover rounded-lg border" />
    } @else {
      <div class="text-sm opacity-70">Обложка не загружена</div>
    }

    <div class="flex flex-wrap gap-2 items-center">
      <label [class.opacity-40]="busy"
             class="px-3 py-2 rounded-lg bg-black text-white cursor-pointer disabled:opacity-40">
        {{ busy ? "Загрузка…" : (coverFile ? "Заменить" : "Загрузить") }}
        <input (change)="onFile($event)" [(ngModel)]="cover" [disabled]="busy" accept="image/*" class="hidden" type="file" />
      </label>

      @if(coverLocalUrl){
        <button
          class="px-3 py-2 rounded-lg bg-black/10"
          (click)="deleteCover()"
          [disabled]="busy"
        >
          Удалить
        </button>
      }
    </div>

    <div class="text-xs opacity-60">Поддерживаются изображения до 2 МБ</div>
  </div>

  <div class="rounded-xl border p-4 space-y-3">
    <label class="block">
      <div class="text-sm opacity-70 mb-1">Название</div>
      <input [(ngModel)]="title" class="w-full border rounded-lg px-3 py-2" name="title"/>
    </label>

    <label class="block">
      <div class="text-sm opacity-70 mb-1">Автор</div>
      <input [(ngModel)]="author" class="w-full border rounded-lg px-3 py-2" name="author"/>
    </label>

    <label class="block">
      <div class="text-sm opacity-70 mb-1">Описание (опционально)</div>
      <textarea [(ngModel)]="description" class="w-full border rounded-lg px-3 py-2" name="description" rows="5"></textarea>
    </label>

    @if(error){
      <div class="text-red-600">{{ error }}</div>
    }

    <button
      (click)="submit()"
      [disabled]="busy || !title.trim()"
      class="px-3 py-2 rounded-lg bg-black text-white disabled:opacity-40"
    >
      {{ busy ? "Сохранение…" : "Сохранить" }}
    </button>
  </div>
</div>
